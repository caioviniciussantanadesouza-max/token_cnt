<!DOCTYPE html><html lang="pt-BR">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<title>CNT — Centro Natural TEC Amazônia</title><style>
html,body{
margin:0;
height:100%;
background:#000;
color:#dfffff;
font-family:Segoe UI,Arial;
overflow:hidden;
}

#app{
position:fixed;
inset:0;
display:grid;
grid-template-columns:300px 1fr 340px;
grid-template-rows:110px 1fr;
gap:14px;
padding:14px;
box-sizing:border-box;
}

.glass{
background:rgba(0,18,28,.45);
border:1px solid rgba(110,210,255,.25);
border-radius:22px;
backdrop-filter:blur(12px);
padding:12px;
}

/* HEADER */
#header{
grid-column:1/4;
display:flex;
flex-direction:column;
justify-content:center;
align-items:center;
font-weight:700;
}

/* LEFT */
.big{font-size:58px;font-weight:200}

/* MAP */
#center{position:relative;overflow:hidden}
#mapBase,#mapPoints{
position:absolute;inset:0;width:100%;height:100%;
object-fit:contain
}

/* TELEMETRIA */
#wave{width:100%;height:80px}

/* MOBILE */
@media(max-width:1100px){
#app{display:flex;flex-direction:column;overflow:auto}
#center{height:55vh}
}
</style></head><body>
<div id="app"><div id="header" class="glass">
CNT — Centro Natural TEC Amazônia<br>
<small>Fonte: dados públicos governamentais • Ano base 2025</small>
</div><div id="left" class="glass">
<div>Índice ecológico</div>
<div class="big" id="eco">--</div>
<div id="sub"></div>
</div><div id="center" class="glass">
<img id="mapBase" src="mapa_base.png">
<canvas id="mapPoints"></canvas>
</div><div id="right" class="glass">
<button onclick="window.open('https://pump.fun/coin/GCVyjNaCbXkwGUuktyNxSXad4ozmTp2fzQr2jieSpump')">
Comprar CNT
</button>
<canvas id="wave"></canvas>
</div></div><script>
/* ---------- SAFE LOADER (nunca quebra a página) ---------- */
async function loadJSON(file){
try{
const r=await fetch(file,{cache:"no-store"});
if(!r.ok) throw 0;
return await r.json();
}catch(e){
console.warn("Falhou:",file);
return null;
}
}

/* ---------- CANVAS ---------- */
const cvs=document.getElementById("mapPoints");
const ctx=cvs.getContext("2d");
function resize(){
cvs.width=cvs.offsetWidth;
cvs.height=cvs.offsetHeight;
}
window.onresize=resize;resize();

/* ---------- DADOS ---------- */
let pontos=[];
(async()=>{
const dados=await loadJSON("dados_eco.json");
if(dados && dados.pontos) pontos=dados.pontos;
iniciar();
})();

/* ---------- CORES ---------- */
const cores={
agua:"#00bfff",
vegetacao:"#00ff88",
transicao:"#ffee00",
desmatamento:"#ff3300"
};

/* ---------- PROJEÇÃO BRASIL ---------- */
function proj(lat,lon){
return[
((lon+75)/45)*cvs.width,
((5-lat)/40)*cvs.height
];
}

/* ---------- ÍNDICE ---------- */
function atualizarIndice(){
if(!pontos.length)return;
let bom=0,ruim=0;
pontos.forEach(p=>{
if(p.classe=="vegetacao"||p.classe=="agua")bom++;
else ruim++;
});
let v=Math.round((bom/(bom+ruim))*100);
document.getElementById("eco").textContent=v;
document.getElementById("sub").textContent=bom+" positivos / "+ruim+" negativos";
}

/* ---------- HOLOGRAMA ---------- */
function desenhar(){
ctx.clearRect(0,0,cvs.width,cvs.height);
pontos.forEach(p=>{
const[x,y]=proj(p.lat,p.lon);
ctx.fillStyle=cores[p.classe]||"#fff";
ctx.globalAlpha=.55+.45*Math.sin(Date.now()/400);
ctx.beginPath();
ctx.arc(x,y,2.4,0,6.28);
ctx.fill();
});
requestAnimationFrame(desenhar);
}

/* ---------- TELEMETRIA ---------- */
const wave=document.getElementById("wave");
const w=wave.getContext("2d");
wave.width=wave.offsetWidth;wave.height=wave.offsetHeight;
function tele(){
w.clearRect(0,0,wave.width,wave.height);
w.strokeStyle="#6ed2ff";
w.beginPath();
for(let x=0;x<wave.width;x++){
let y=wave.height/2+Math.sin((x+Date.now()/40)/15)*18;
x?w.lineTo(x,y):w.moveTo(x,y);
}
w.stroke();
requestAnimationFrame(tele);
}

/* ---------- START ---------- */
function iniciar(){
atualizarIndice();
desenhar();
tele();
}
</script></body>
</html>
