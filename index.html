<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8">
<title>OS.CNT — Observatório Ambiental</title>
<meta name="viewport" content="width=device-width, initial-scale=1">

<style>
html,body{
    margin:0;
    height:100%;
    background:#01040a;
    font-family:Segoe UI, Arial;
    color:#9fdfff;
    overflow:hidden;
}

#map{ position:absolute; inset:0; }

#bg{
    position:absolute;
    inset:0;
    width:100%;
    height:100%;
    object-fit:cover;
    animation:biome 18s ease-in-out infinite;
}

@keyframes biome{
    0%{ filter:brightness(.85) contrast(1.15) saturate(1.1);}
    50%{ filter:brightness(.95) contrast(1.25) saturate(1.25);}
    100%{ filter:brightness(.85) contrast(1.15) saturate(1.1);}
}

.glass{
    position:absolute;
    padding:18px;
    text-shadow:0 0 6px rgba(120,220,255,.35);
}

#status{ top:20px; left:20px; width:280px; }
#telemetry{ top:20px; left:340px; right:260px; height:120px; }
#indices{ top:20px; right:20px; width:200px; line-height:26px; }

#psa{
    bottom:20px;
    left:50%;
    transform:translateX(-50%);
    width:420px;
    text-align:center;
}

#cnt{
    font-size:56px;
    letter-spacing:4px;
    font-weight:300;
    text-shadow:0 0 10px rgba(120,220,255,.7);
}

button,input{
    background:rgba(255,255,255,.05);
    border:1px solid rgba(120,220,255,.3);
    color:#9fdfff;
    padding:6px;
}
button:hover{ background:rgba(120,220,255,.15); cursor:pointer; }
</style>
</head>

<body>

<div id="map">
<img src="imagem_cnt.png" id="bg">
</div>

<div id="status" class="glass">
<b>OS.CNT</b><br>
Earth Environmental Monitoring Infrastructure<br><br>
<div id="cnt">72.4</div>
Confiança: Alta<br><br>
Estado do sistema:<br>
<b>Regulação estável</b><br>
Modo operacional: Monitoramento ativo<br>
Status: Operacional
</div>

<div id="indices" class="glass">
IBE .......... 88<br>
IAB .......... 88<br>
IBI .......... 11<br>
HID .......... 83<br>
ENT .......... 88<br>
PAN .......... 78
</div>

<div id="psa" class="glass">
<div id="walletStatus">Carteira não conectada</div><br>
<button id="connectBtn">Conectar carteira</button><br><br>

Valor em SOL:<br>
<input id="amount" type="number" value="0.1" step="0.01"><br><br>

<button id="buyBtn">Comprar CNT</button>
</div>

<script src="https://unpkg.com/@solana/web3.js@latest/lib/index.iife.js"></script>

<script>
const { Connection, PublicKey, Transaction } = solanaWeb3;
const connection=new Connection("https://api.mainnet-beta.solana.com");

let provider=null;
let wallet=null;

document.getElementById("connectBtn").onclick=async()=>{
    if(window.solana){
        provider=window.solana;
        await provider.connect();
        wallet=provider.publicKey.toString();
        document.getElementById("walletStatus").innerText=
        "Conectado: "+wallet.slice(0,4)+"..."+wallet.slice(-4);
    }else alert("Instale Phantom Wallet");
};

document.getElementById("buyBtn").onclick=async()=>{
    if(!wallet) return alert("Conecte a carteira");

    const amount=parseFloat(document.getElementById("amount").value);
    const TOKEN="GCVyjNaCbXkwGUuktyNxSXad4ozmTp2fzQr2jieSpump";

    const quote=await fetch(`https://quote-api.jup.ag/v6/quote?inputMint=So11111111111111111111111111111111111111112&outputMint=${TOKEN}&amount=${Math.floor(amount*1e9)}&slippageBps=50`).then(r=>r.json());

    const swap=await fetch("https://quote-api.jup.ag/v6/swap",{
        method:"POST",
        headers:{ "Content-Type":"application/json" },
        body:JSON.stringify({
            quoteResponse:quote,
            userPublicKey:wallet,
            wrapAndUnwrapSol:true
        })
    }).then(r=>r.json());

    const tx=Transaction.from(Uint8Array.from(atob(swap.swapTransaction),c=>c.charCodeAt(0)));
    tx.feePayer=new PublicKey(wallet);

    const signed=await provider.signTransaction(tx);
    const sig=await connection.sendRawTransaction(signed.serialize());

    alert("Compra enviada ✔\nTx: "+sig);
};
</script>

</body>
</html>
