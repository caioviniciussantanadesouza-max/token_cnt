<!DOCTYPE html>

<html lang="pt-BR">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>CNT — Brasil</title>

<style>
body{
margin:0;
background:#02070b;
color:#d7f6ff;
font-family:Arial, Helvetica, sans-serif;
overflow:hidden;
}

.container{
width:100vw;
height:100vh;
display:flex;
align-items:center;
justify-content:center;
}

.map{
position:relative;
width:min(95vw,1200px);
aspect-ratio:1.63/1;
}

.map img,
.map canvas{
position:absolute;
inset:0;
width:100%;
height:100%;
object-fit:contain;
}

/* painel */
.panel{
position:absolute;
bottom:20px;
left:20px;
background:rgba(0,20,28,.7);
padding:14px 18px;
border-radius:10px;
border:1px solid rgba(110,226,255,.25);
}
.value{font-size:28px;color:#19ffa0}
</style>

</head>

<body>
<div class="container">
<div class="map">

<img src="mapa_base.png" id="base">

<canvas id="ibge"></canvas> <canvas id="glow"></canvas>

<div class="panel">
<div class="value" id="indice">68.0</div>
Índice ecológico
</div>

</div>
</div>

<script>
const canvas=document.getElementById("ibge");
const ctx=canvas.getContext("2d");
const glow=document.getElementById("glow");
const gtx=glow.getContext("2d");

function resize(){
const rect=canvas.getBoundingClientRect();
canvas.width=rect.width;
canvas.height=rect.height;
glow.width=rect.width;
glow.height=rect.height;
draw();
}
window.addEventListener("resize",resize);
resize();

/* -------- PROJEÇÃO CORRIGIDA -------- */
function proj(lon,lat){
const PAD=0.065; // ajuste fino do tamanho IBGE
const minLon=-74,maxLon=-34;
const minLat=-34,maxLat=6;

const x=(lon-minLon)/(maxLon-minLon);
const y=1-(lat-minLat)/(maxLat-minLat);

return[
(x*(1-PAD*2)+PAD)*canvas.width,
(y*(1-PAD*2)+PAD)*canvas.height
];
}

/* simulação de contorno */
function draw(){
ctx.clearRect(0,0,canvas.width,canvas.height);
gtx.clearRect(0,0,glow.width,glow.height);

ctx.strokeStyle="#6ee2ff";
ctx.lineWidth=1;

gtx.strokeStyle="#19ffa0";
gtx.lineWidth=4;
gtx.shadowBlur=20;
gtx.shadowColor="#19ffa0";

const pts=[
[-70,2],[-50,4],[-38,-10],[-44,-30],[-60,-33],[-72,-10]
];

ctx.beginPath();
gtx.beginPath();

pts.forEach((p,i)=>{
const [x,y]=proj(p[0],p[1]);
i?ctx.lineTo(x,y):ctx.moveTo(x,y);
i?gtx.lineTo(x,y):gtx.moveTo(x,y);
});

ctx.closePath();
gtx.closePath();
ctx.stroke();
gtx.stroke();
}
</script>

</body>
</html>
